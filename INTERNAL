Architecture
client:
nautilus-share.c -> smbparser-dbus-client.c 

nautilus-share.c:
It's the nautilus extension, the UI.
It uses functions from smbparser-dbus-client.c to talk to the server throught dbus

smbparser-dbus-client.c:
contains the functions to talk to the dbus server part and manipulate the smb.conf file

server:
smbshared.c->smbparser-dbus-server.c -> smbparser.c

smbshared.c:
the "main" of the deamon

smbparser-dbus-server.c:
the server part of the dbus
check if the user share a folder that he owns
check if the user use an authorized share name
check if the user use authorized directives

smbparser.c:
the functions that really manipulate the /etc/samba/smbshared.conf file that should be included by the smb.conf file of your samba server.

